"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[5844],{15680:(e,t,n)=>{n.d(t,{xA:()=>c,yg:()=>g});var i=n(96540);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},l=Object.keys(e);for(i=0;i<l.length;i++)n=l[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(i=0;i<l.length;i++)n=l[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=i.createContext({}),p=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=p(e.components);return i.createElement(s.Provider,{value:t},e.children)},m="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},y=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),m=p(n),y=a,g=m["".concat(s,".").concat(y)]||m[y]||d[y]||l;return n?i.createElement(g,r(r({ref:t},c),{},{components:n})):i.createElement(g,r({ref:t},c))}));function g(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,r=new Array(l);r[0]=y;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[m]="string"==typeof e?e:a,r[1]=o;for(var p=2;p<l;p++)r[p]=n[p];return i.createElement.apply(null,r)}return i.createElement.apply(null,n)}y.displayName="MDXCreateElement"},4317:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>d,frontMatter:()=>l,metadata:()=>o,toc:()=>p});var i=n(58168),a=(n(96540),n(15680));const l={},r="Web Views",o={unversionedId:"api/webviews",id:"version-20.x/api/webviews",title:"Web Views",description:"Web views are native components that render content not natively supported by the platform, like web pages or PDF documents.",source:"@site/versioned_docs/version-20.x/api/webviews.md",sourceDirName:"api",slug:"/api/webviews",permalink:"/Detox/docs/api/webviews",draft:!1,editUrl:"https://github.com/wix/Detox/edit/master/docs/versioned_docs/version-20.x/api/webviews.md",tags:[],version:"20.x",frontMatter:{},sidebar:"apiSidebar",previous:{title:"Expect",permalink:"/Detox/docs/api/expect"},next:{title:"Logger",permalink:"/Detox/docs/api/logger"}},s={},p=[{value:"Locating Web View Elements",id:"locating-web-view-elements",level:2},{value:"Single Web View Scenario",id:"single-web-view-scenario",level:3},{value:"Multiple Web Views Scenario",id:"multiple-web-views-scenario",level:3},{value:"Using <code>atIndex</code> (iOS only)",id:"using-atindex-ios-only",level:4},{value:"Matchers",id:"matchers",level:2},{value:"Example Matchers",id:"example-matchers",level:3},{value:"Actions",id:"actions",level:2},{value:"Action Examples",id:"action-examples",level:3},{value:"Expectations",id:"expectations",level:2},{value:"Expectation Examples",id:"expectation-examples",level:3}],c={toc:p},m="wrapper";function d(e){let{components:t,...n}=e;return(0,a.yg)(m,(0,i.A)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.yg)("h1",{id:"web-views"},"Web Views"),(0,a.yg)("p",null,"Web views are native components that render content not natively supported by the platform, like web pages or PDF documents.\nHowever, elements within web views are not native components, making direct interaction through Detox challenging.\nTo address this, Detox offers a suite of matchers, actions, and expectations designed for interacting with content inside web views."),(0,a.yg)("h2",{id:"locating-web-view-elements"},"Locating Web View Elements"),(0,a.yg)("h3",{id:"single-web-view-scenario"},"Single Web View Scenario"),(0,a.yg)("p",null,"When dealing with a single web view on the screen, use the ",(0,a.yg)("inlineCode",{parentName:"p"},"web.element()")," function with web view matchers to locate elements within it. Once an element is located, you can apply web view actions and expectations to it."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"const innerElement = web.element(by.web.id('inner_element_identifier'));\nawait expect(innerElement).toHaveText('Hello World!');\n")),(0,a.yg)("p",null,"This example demonstrates locating an element by its HTML ",(0,a.yg)("inlineCode",{parentName:"p"},"id")," attribute and verifying its text content."),(0,a.yg)("h3",{id:"multiple-web-views-scenario"},"Multiple Web Views Scenario"),(0,a.yg)("p",null,"For screens with multiple web views, first identify the specific web view using a ",(0,a.yg)("strong",{parentName:"p"},(0,a.yg)("a",{parentName:"strong",href:"/Detox/docs/api/matchers"},"native matcher")),". Then, locate the element within that web view."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"const myWebView = web(by.id('webview_identifier'));\nconst innerElement = myWebView.element(by.web.id('inner_element_identifier'));\nawait expect(innerElement).toHaveText('Hello World!');\n")),(0,a.yg)("h4",{id:"using-atindex-ios-only"},"Using ",(0,a.yg)("inlineCode",{parentName:"h4"},"atIndex")," (iOS only)"),(0,a.yg)("p",null,"It is also possible to locate the web view by applying at-index to the web view matcher:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"const myWebView = web(by.id('webview_identifier').atIndex(1));\n")),(0,a.yg)("p",null,"In this example:"),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},"The ",(0,a.yg)("inlineCode",{parentName:"li"},"web()")," function and ",(0,a.yg)("inlineCode",{parentName:"li"},"by.id()")," matcher locate the web view by its accessibility identifier."),(0,a.yg)("li",{parentName:"ol"},"The ",(0,a.yg)("inlineCode",{parentName:"li"},"myWebView.element()")," method and ",(0,a.yg)("inlineCode",{parentName:"li"},"by.web.id()")," matcher locate an HTML element within the web view."),(0,a.yg)("li",{parentName:"ol"},"The expectation to verify the element's text is the same as in the single web view scenario.")),(0,a.yg)("h2",{id:"matchers"},"Matchers"),(0,a.yg)("p",null,"Detox provides various matchers for locating elements within a web view:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"by.web.id(id)")," - Matches elements with the specified HTML ",(0,a.yg)("inlineCode",{parentName:"li"},"id"),"."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"by.web.className(className)")," - Matches elements with the specified CSS class name."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"by.web.cssSelector(cssSelector)")," - Matches elements with the specified CSS selector."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"by.web.name(name)")," - Matches form input elements with the specified ",(0,a.yg)("inlineCode",{parentName:"li"},"name")," attribute."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"by.web.xpath(xpath)")," - Matches elements with the specified XPath."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"by.web.href(href)")," - Matches elements with the specified ",(0,a.yg)("inlineCode",{parentName:"li"},"href")," attribute."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"by.web.hrefContains(hrefContains)")," - Matches elements containing a specified ",(0,a.yg)("inlineCode",{parentName:"li"},"href")," substring."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"by.web.tag(tag)")," - Matches elements with the specified tag name."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"atIndex(index)")," - Selects the element at a specified index when multiple matches are found.")),(0,a.yg)("h3",{id:"example-matchers"},"Example Matchers"),(0,a.yg)("p",null,"Here are examples of using some of the matchers:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"// Match by HTML ID\nweb.element(by.web.id('identifier'));\n\n// Match by CSS Class Name\nweb.element(by.web.className('className'));\n\n// Match by CSS Selector\nweb.element(by.web.cssSelector('#cssSelector'));\n\n// Match with index\nweb.element(by.web.id('identifier').atIndex(1));\n")),(0,a.yg)("h2",{id:"actions"},"Actions"),(0,a.yg)("p",null,"Actions allow you to interact with elements within a web view. Available actions include:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"tap()")," - Taps the element."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"typeText(text[, isContentEditable])")," - Types text into the element. ",(0,a.yg)("strong",{parentName:"li"},"Android:")," the ",(0,a.yg)("inlineCode",{parentName:"li"},"isContentEditable")," flag indicates if the element is ",(0,a.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/contentEditable"},"content-editable"),", defaulting to ",(0,a.yg)("inlineCode",{parentName:"li"},"false"),"."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"replaceText(text)")," - Replaces the element's text. ",(0,a.yg)("strong",{parentName:"li"},"Android:")," not supported for content-editable elements."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"clearText()")," - Clears the element's text. ",(0,a.yg)("strong",{parentName:"li"},"Android:")," not supported for content-editable elements."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"selectAllText()")," - Selects all text of the element. ",(0,a.yg)("strong",{parentName:"li"},"Android:")," supported only for content-editable elements."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"getText()")," - Retrieves the element's text."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"scrollToView()")," - Scrolls until the element is visible at the top of the viewport."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"focus()")," - Focuses on the element."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"moveCursorToEnd()")," - Moves the cursor to the end of the element's content. ",(0,a.yg)("strong",{parentName:"li"},"Android:")," supported only for content-editable elements."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"runScript(script[, args])")," - Executes a JavaScript script on the element. You can pass a function or a string to be executed in the context of the web view, and the result will be returned. ",(0,a.yg)("strong",{parentName:"li"},"Note:")," Can only be called from an inner element."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"getCurrentUrl()")," - Retrieves the current URL of the web view. ",(0,a.yg)("strong",{parentName:"li"},"Note:")," Can only be called from an inner element."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"getTitle()")," - Retrieves the title of the web view. ",(0,a.yg)("strong",{parentName:"li"},"Note:")," Can only be called from an inner element.")),(0,a.yg)("h3",{id:"action-examples"},"Action Examples"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"// Tap an element\nawait web.element(by.web.id('identifier')).tap();\n\n// Type text into an element\nawait web.element(by.web.id('identifier')).typeText('Hello World!');\n\n// Run a JavaScript script on an element\nawait web.element(by.web.id('identifier')).runScript('(element) => element.click()');\n\n// Run a JavaScript script on an element with paramaters\nconst text = await webElement.runScript(function get(element, property) {\n  return element[property];\n}, ['textContent']);\n")),(0,a.yg)("h2",{id:"expectations"},"Expectations"),(0,a.yg)("p",null,"Expectations are assertions on the state of elements within a web view:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"toHaveText(text)")," - Asserts the element contains the specified text."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"toExist()")," - Asserts the element exists."),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("inlineCode",{parentName:"li"},"not")," - Negates the expectation, e.g., ",(0,a.yg)("inlineCode",{parentName:"li"},".not.toHaveText('text')"),".")),(0,a.yg)("h3",{id:"expectation-examples"},"Expectation Examples"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-javascript"},"// Assert an element has specific text\nawait expect(web.element(by.web.id('identifier'))).toHaveText('Hello World!');\n\n// Assert an element exists\nawait expect(web.element(by.web.id('identifier'))).toExist();\n")))}d.isMDXComponent=!0}}]);